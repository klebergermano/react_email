<!DOCTYPE html>
<html>
  <head>
    <title>Test</title>
  </head>
  <body>
    <div>
      <h1>Test</h1>
    </div>
    <script>
      if (navigator.geolocation) {
        console.log("Geolocation ok");
        navigator.geolocation.getCurrentPosition(position => {
          const lat = position.coords.latitude;
          const long = position.coords.longitude;

          console.log(position.coords.latitude, position.coords.longitude);

          document.getElementById("lat").textContent = lat;
          document.getElementById("long").textContent = long;

          const data = { lat, long };

          const options = {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
          };

          fetch("/api", options);
        });
      } else {
        console.log("Geolocation is not supported by your browser");
      }
    </script>

    <p id="lat"></p>
    <p id="long"></p>
  </body>
</html>
